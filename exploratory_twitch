{"cells":[{"cell_type":"markdown","metadata":{"id":"cO1nP0Me409q"},"source":["# Get Twitch Vods"]},{"cell_type":"code","execution_count":1,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":13743,"status":"ok","timestamp":1700614781975,"user":{"displayName":"Kyle Lee","userId":"05349483984004000375"},"user_tz":300},"id":"Vjx1PWqGdAM1","outputId":"da24b89d-82d3-4fc8-851a-e53183a11508"},"outputs":[{"output_type":"stream","name":"stdout","text":["Mounted at /content/drive\n"]}],"source":["import requests\n","import json\n","import subprocess\n","import os\n","from tqdm.auto import tqdm\n","from google.colab import drive\n","from collections import defaultdict\n","\n","drive.mount('/content/drive')\n","DATASET_PATH = '/content/drive/MyDrive/CS485/twitch_dataset'\n","\n","# data taken from socialblade, 11/09/2023\n","TOP_100_STREAMERS = [\n","    \"Ninja\",\n","    \"xQc\",\n","    \"Tfue\",\n","    \"shroud\",\n","    \"pokimane\",\n","    \"sodapoppin\",\n","    \"KaiCenat\",\n","    \"tommyinnit\",\n","    \"RiotGames\",\n","    \"nickmercs\",\n","    \"SypherPK\",\n","    \"Clix\",\n","    \"ESLCS\",\n","    \"summit1g\",\n","    \"Fortnite\",\n","    \"Mongraal\",\n","    \"Bugha\",\n","    \"loltyler1\",\n","    \"Tubbo\",\n","    \"GeorgeNotFound\",\n","    \"NickEh30\",\n","    \"dakotaz\",\n","    \"RanbooLive\",\n","    \"Philza\",\n","    \"RocketLeague\",\n","    \"benjyfishy\",\n","    \"Symfuhny\",\n","    \"TenZ\",\n","    \"Sapnap\",\n","    \"x2Twins\",\n","    \"MrSavage\",\n","    \"Aydan\",\n","    \"Jynxzi\",\n","    \"LIRIK\",\n","    \"tarik\",\n","    \"aceu\",\n","    \"Loserfruit\",\n","    \"easportsfc\",\n","]\n","\n","\n","CLIENT_ID = 'brljuwr0exc9iaxvxduh8iyx4invnl'\n","CLIENT_SECRET = 'tccuqmfouo7doi8ca9vccjb3pw1bmm'\n","NUM_STREAMERS = 38 # @param {type:\"integer\"}\n","STREAMS_PER_STREAMERS = 14 # @param {type:\"integer\"}"]},{"cell_type":"code","execution_count":4,"metadata":{"id":"PCJAQD17qRMD","executionInfo":{"status":"ok","timestamp":1700614849044,"user_tz":300,"elapsed":621,"user":{"displayName":"Kyle Lee","userId":"05349483984004000375"}}},"outputs":[],"source":["def get_access_token():\n","  endpoint = 'https://id.twitch.tv/oauth2/token'\n","\n","  params = {\n","      'client_id': CLIENT_ID,\n","      'client_secret': CLIENT_SECRET,\n","      'grant_type': 'client_credentials'\n","  }\n","\n","  response = requests.post(endpoint, params)\n","  data = response.json()\n","\n","  return data['access_token']\n","\n","OAUTH_TOKEN = get_access_token()"]},{"cell_type":"code","execution_count":5,"metadata":{"id":"NOg1IWLjsTXB","executionInfo":{"status":"ok","timestamp":1700614849365,"user_tz":300,"elapsed":1,"user":{"displayName":"Kyle Lee","userId":"05349483984004000375"}}},"outputs":[],"source":["def username_to_userid(username):\n","  endpoint_url = 'https://api.twitch.tv/helix/users'\n","\n","  # Set the parameters for the request (you can customize these)\n","  params = {\n","      'login': f'{username}',  # Replace with the user ID for which you want to get videos\n","  }\n","\n","  # Set headers with client ID and secret\n","  headers = {\n","      'Client-ID': CLIENT_ID,\n","      'Authorization': f'Bearer {OAUTH_TOKEN}'\n","  }\n","\n","  response = requests.get(endpoint_url, params=params, headers=headers)\n","\n","  if response.status_code == 200:\n","      data = response.json()\n","      return data['data'][0]['id']\n","  else:\n","      # Print the error status code and message\n","      print(f\"Error: {response.status_code} - {response.text}\")\n"]},{"cell_type":"code","execution_count":6,"metadata":{"id":"ZNx3IyQXrLvS","executionInfo":{"status":"ok","timestamp":1700614850664,"user_tz":300,"elapsed":121,"user":{"displayName":"Kyle Lee","userId":"05349483984004000375"}}},"outputs":[],"source":["def get_emotes_from_channel(channel):\n","  endpoint_url = 'https://api.twitch.tv/helix/chat/emotes'\n","\n","  # Set the parameters for the request (you can customize these)\n","  params = {\n","      'broadcaster_id': f'{username_to_userid(channel)}',  # Replace with the user ID for which you want to get videos\n","  }\n","\n","  # Set headers with client ID and secret\n","  headers = {\n","      'Client-ID': CLIENT_ID,\n","      'Authorization': f'Bearer {OAUTH_TOKEN}'\n","  }\n","\n","  # Make the API request\n","  response = requests.get(endpoint_url, params=params, headers=headers)\n","\n","  # Check if the request was successful (status code 200)\n","  if response.status_code == 200:\n","      # Parse and print the response JSON\n","      data = response.json()\n","      return data['data']\n","  else:\n","      # Print the error status code and message\n","      print(f\"Error: {response.status_code} - {response.text}\")"]},{"cell_type":"code","source":["[a['name'] for a in get_emotes_from_channel('Ninja')]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"82Pms7HdkSng","executionInfo":{"status":"ok","timestamp":1700598744590,"user_tz":300,"elapsed":798,"user":{"displayName":"Thomas Ji","userId":"10245120714271122346"}},"outputId":"f5227bb9-5888-4a6e-a2be-53ce0c3b4918"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["['ninjaHi',\n"," 'ninjaAmazing',\n"," 'ninjaThrow',\n"," 'ninjaNotEnoughMovement',\n"," 'ninjaS',\n"," 'ninjaBlast3',\n"," 'ninjaCRINJA',\n"," 'ninjaCry',\n"," 'ninjaBand',\n"," 'ninjaTilted',\n"," 'ninjaThirst',\n"," 'ninjaFail',\n"," 'ninjaIQ',\n"," 'ninjaToxic',\n"," 'ninjaCash',\n"," 'ninjaLlama',\n"," 'ninjaChocobo',\n"," 'ninjaK',\n"," 'ninjaDance',\n"," 'ninjaHmm',\n"," 'ninjaBush',\n"," 'ninjaFan',\n"," 'ninjaNavi',\n"," 'ninjaAww',\n"," 'ninjaH',\n"," 'ninjaTooth',\n"," 'ninjaShrug',\n"," 'ninjaUm',\n"," 'ninjaFood',\n"," 'ninjaChance',\n"," 'ninjaAim',\n"," 'ninjaTube',\n"," 'ninja10',\n"," 'ninjaPog',\n"," 'ninjaPopcorn',\n"," 'ninjaBlood',\n"," 'ninjaSplat',\n"," 'ninjaCreep',\n"," 'ninjaWifey',\n"," 'ninjaGold',\n"," 'ninjaSplode',\n"," 'ninjaButton',\n"," 'ninjaTilt',\n"," 'ninja90s',\n"," 'ninjaHype',\n"," 'ninjaAdore',\n"," 'ninjaTroll',\n"," 'ninjaPrime',\n"," 'ninjaBlast2',\n"," 'ninjaHS',\n"," 'ninjaStars',\n"," 'ninjaChug',\n"," 'ninjaBlank',\n"," 'ninjaClap',\n"," 'ninjaPower',\n"," 'ninjaBlast1',\n"," 'ninjaShield',\n"," 'ninjaRekt',\n"," 'ninjaFire',\n"," 'ninjaGnam',\n"," 'ninjaBits']"]},"metadata":{},"execution_count":8}]},{"cell_type":"code","source":["[a['name'] for a in get_emotes_from_channel('xQc')]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"BBZlIfL8lZ7S","executionInfo":{"status":"ok","timestamp":1700598759771,"user_tz":300,"elapsed":586,"user":{"displayName":"Thomas Ji","userId":"10245120714271122346"}},"outputId":"3a1aec60-3618-4374-f4fc-f486c118f8f6"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["['xqcP',\n"," 'xqcL',\n"," 'xqcT',\n"," 'xqcHead',\n"," 'xqcTOS',\n"," 'xqcRage',\n"," 'xqcH',\n"," 'xqcA',\n"," 'xqcClown',\n"," 'xqcSkull',\n"," 'xqcJoy',\n"," 'xqcSkip',\n"," 'xqcI',\n"," 'xqcSmug',\n"," 'xqcOmega',\n"," 'xqcN',\n"," 'xqcSad',\n"," 'xqcLL',\n"," 'xqcHands',\n"," 'xqcHYPERF',\n"," 'xqcArm1',\n"," 'xqcDitch',\n"," 'xqcSleeper',\n"," 'xqcTL',\n"," 'xqcC',\n"," 'xqcArm2',\n"," 'xqcPrime',\n"," 'xqcMS',\n"," 'xqcK',\n"," 'xqcWut',\n"," 'xqcMood',\n"," 'xqcS',\n"," 'xqcLook',\n"," 'xqcCringe',\n"," 'xqcFace',\n"," 'xqcHAA',\n"," 'xqcCo',\n"," 'xqcPeepo',\n"," 'xqcSheesh',\n"," 'xqcY',\n"," 'xqcDab',\n"," 'xqcDespair',\n"," 'xqcSlam',\n"," 'xqcF',\n"," 'xqcCursed',\n"," 'xqcJ',\n"," 'xqcE',\n"," 'xqcG',\n"," 'xqcSmile',\n"," 'xqcKek',\n"," 'xqcDrip',\n"," 'xqcStare',\n"," 'xqcSword',\n"," 'xqcOld',\n"," 'xqcRich',\n"," 'xqcM',\n"," 'xqcAm',\n"," 'xqcCheer',\n"," 'xqcTree',\n"," 'xqcLove',\n"," 'xqcSus',\n"," 'xqcDUD',\n"," 'xqcEZ',\n"," 'xqcNom',\n"," 'xqcJuice',\n"," 'xqcWtf',\n"," 'xqcTF']"]},"metadata":{},"execution_count":9}]},{"cell_type":"code","source":["[a['name'] for a in get_emotes_from_channel('pokemane')]"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"vQU98AfWijKW","executionInfo":{"status":"ok","timestamp":1700614900719,"user_tz":300,"elapsed":768,"user":{"displayName":"Kyle Lee","userId":"05349483984004000375"}},"outputId":"5f53e3af-1de1-4598-fdc9-a9f7317af229"},"execution_count":9,"outputs":[{"output_type":"execute_result","data":{"text/plain":["[]"]},"metadata":{},"execution_count":9}]},{"cell_type":"code","source":[],"metadata":{"id":"V3hKx3YIiwJj"},"execution_count":null,"outputs":[]}],"metadata":{"colab":{"provenance":[]},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}